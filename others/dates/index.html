<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ØªÙˆØ§Ø±ÙŠØ®</title>
    <link rel="stylesheet" href="../tables.css" />
    <link rel="stylesheet" href="../global.css" />
    <script defer src="../sortable-table.js"></script>
    <style>
      /* if .tag is not last one add break line before it */
      .tag:not(:last-child):before {
        content: "";
        display: block;
      }

      /* Era styling with distinct colors and left borders */
      :root {
        --viking-color: #4285f4;
        --medieval-color: #34a853;
        --reformation-color: #fbbc05;
        --absolutism-color: #ea4335;
        --democracy-color: #ff00c8;
        --wartime-color: #ff6d01;
        --welfare-color: #1a73e8;
      }

      .era-viking {
        border-left: 6px solid var(--viking-color);
        background: linear-gradient(90deg, rgba(139, 69, 19, 0.08) 0%, transparent 100%);
      }

      .era-medieval {
        border-left: 6px solid var(--medieval-color);
        background: linear-gradient(90deg, rgba(74, 85, 104, 0.08) 0%, transparent 100%);
      }

      .era-reformation {
        border-left: 6px solid var(--reformation-color);
        background: linear-gradient(90deg, rgba(45, 80, 22, 0.08) 0%, transparent 100%);
      }

      .era-absolutism {
        border-left: 6px solid var(--absolutism-color);
        background: linear-gradient(90deg, rgba(124, 45, 18, 0.08) 0%, transparent 100%);
      }

      .era-democracy {
        border-left: 6px solid var(--democracy-color);
        background: linear-gradient(90deg, rgba(30, 64, 175, 0.08) 0%, transparent 100%);
      }

      .era-wartime {
        border-left: 6px solid var(--wartime-color);
        background: linear-gradient(90deg, rgba(153, 27, 27, 0.08) 0%, transparent 100%);
      }

      .era-welfare {
        border-left: 6px solid var(--welfare-color);
        background: linear-gradient(90deg, rgba(5, 150, 105, 0.08) 0%, transparent 100%);
      }

      /* Add era legend */
      .era-legend {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin: 20px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        font-size: 0.9em;
        width: fit-content;
        direction: rtl;
        max-width: 1200px;
        margin: 0 auto;
      }

      .era-legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .era-legend-color {
        width: 20px;
        height: 4px;
        border-radius: 2px;
      }
    </style>
  </head>
  <body>
    

    <div id="content"><div class="era-legend">
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--viking-color)"></div>
        <span>ğŸ›¡ï¸ Ø¹ØµØ± Ø§Ù„ÙØ§ÙŠÙƒÙ†Øº (750-1050)</span>
      </div>
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--medieval-color)"></div>
        <span>ğŸ° Ø§Ù„Ø¹ØµÙˆØ± Ø§Ù„ÙˆØ³Ø·Ù‰ (1050-1500)</span>
      </div>
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--reformation-color)"></div>
        <span>â›ª Ø¹ØµØ± Ø§Ù„Ø¥ØµÙ„Ø§Ø­ (1536-1660)</span>
      </div>
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--absolutism-color)"></div>
        <span>ğŸ‘‘ Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ù…Ø·Ù„Ù‚ (1660-1849)</span>
      </div>
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--democracy-color)"></div>
        <span>ğŸ—³ï¸ Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© ÙˆØ§Ù„ØªØµÙ†ÙŠØ¹ (1849-1914)</span>
      </div>
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--wartime-color)"></div>
        <span>âš”ï¸ Ø§Ù„Ø­Ø±ÙˆØ¨ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡ (1914-1945)</span>
      </div>
      <div class="era-legend-item">
        <div class="era-legend-color" style="background: var(--welfare-color)"></div>
        <span>ğŸ›ï¸ Ø¯ÙˆÙ„Ø© Ø§Ù„Ø±ÙØ§Ù‡ (1945-Ø§Ù„ÙŠÙˆÙ…)</span>
      </div>
    </div></div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module">
      const text = await fetch("./dates.md").then(response => response.text());
      const html = marked.parse(text);
      const linkedHtml = html.replace(/<code>(.*?)<\/code>/g, (match, codeSegment) => {
        const query = encodeURIComponent(codeSegment);
        return `<a target="_blank" class="tag" href="https://zuhairtaha.github.io/testing-pages/others/search/index.html?q=${query}">${codeSegment}</a>`;
      });

      // Function to determine era based on date/period
      function getEraClass(dateText) {
        const text = dateText.toLowerCase();

        // Viking Age (750-1050)
        if (
          text.includes("vikingetiden") ||
          text.includes("900-tallet") ||
          text.includes("~800") ||
          text.includes("~965")
        ) {
          return "era-viking";
        }

        // Medieval (1050-1500)
        if (text.includes("middelalderen") || text.includes("~1050")) {
          return "era-medieval";
        }

        // Reformation (1536-1660)
        if (text.includes("1536") || text.includes("1600-tallet") || text.includes("1660") || text.includes("1661")) {
          return "era-reformation";
        }

        // Absolutism (1660-1849)
        if (
          text.includes("1700-tallet") ||
          text.includes("1733") ||
          text.includes("~1770") ||
          text.includes("1801") ||
          text.includes("1814") ||
          text.includes("guldalderen") ||
          text.includes("1840")
        ) {
          return "era-absolutism";
        }

        // Democracy & Industrialization (1849-1914)
        if (
          text.includes("1849") ||
          text.includes("~1850") ||
          text.includes("1864") ||
          text.includes("1870") ||
          text.includes("1800-tallet") ||
          text.includes("1915")
        ) {
          return "era-democracy";
        }

        // Wartime & Reconstruction (1914-1945)
        if (
          text.includes("1917") ||
          text.includes("1920") ||
          text.includes("1930") ||
          text.includes("1933") ||
          text.includes("1940") ||
          text.includes("1943") ||
          text.includes("1945")
        ) {
          return "era-wartime";
        }

        // Welfare State (1945-present)
        return "era-welfare";
      }

      // Parse the HTML and add era classes to table rows
      const tempDiv = document.createElement("div");
      tempDiv.innerHTML = linkedHtml;

      const table = tempDiv.querySelector("table");
      if (table) {
        const rows = table.querySelectorAll("tbody tr");
        rows.forEach(row => {
          const firstCell = row.querySelector("td");
          if (firstCell) {
            const dateText = firstCell.textContent;
            const eraClass = getEraClass(dateText);
            row.classList.add(eraClass);
          }
        });
      }

      document.getElementById("content").innerHTML += tempDiv.innerHTML;
    </script>
  </body>
</html>
